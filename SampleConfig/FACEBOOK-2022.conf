#Auto Config NXLOG - Demo01

#INPUT PORT
<Input FACEBOOK_2022>
    Module      im_tcp
    Host        0.0.0.0
    Port        2022
    Exec        parse_syslog();
</Input>

#Filters Host

#Filters Host1 "C01_AD"
    <Processor filter_FACEBOOK_HOST1>
    Module      pm_filter
    Condition   $raw_event =~ /C01_AD/
</Processor>

#Filters Host2 "ME"
    <Processor filter_FACEBOOK_HOST2>
    Module      pm_filter
    Condition   $raw_event =~ /ME/
</Processor>

#Filters Host3 "FORMULA_APP"
    <Processor filter_FACEBOOK_HOST3>
    Module      pm_filter
    Condition   $raw_event =~ /FORMULA_APP/
</Processor>

#Filters Host4 "upload2.ondemand.com"
    <Processor filter_FACEBOOK_HOST4>
    Module      pm_filter
    Condition   $raw_event =~ /upload2.ondemand.com/
</Processor>

#Filters Host5 "02_APP"
    <Processor filter_FACEBOOK_HOST5>
    Module      pm_filter
    Condition   $raw_event =~ /02_APP/
</Processor>

#Filters Host6 "WORKPLAC.ondemand.com"
    <Processor filter_FACEBOOK_HOST6>
    Module      pm_filter
    Condition   $raw_event =~ /WORKPLAC.ondemand.com/
</Processor>
#Output Log Template


<Output fileout_FACEBOOK_HOST1>
    CreateDir TRUE
    Module      om_file
    File        "/home/syslog/FACEBOOK_2022" + "/" + "C01_AD" + "/" + "C01_AD" + "-" + strftime(now(), "%Y-%m-%d-%H") + ".log"
</Output>


<Output fileout_FACEBOOK_HOST2>
    CreateDir TRUE
    Module      om_file
    File        "/home/syslog/FACEBOOK_2022" + "/" + "ME" + "/" + "ME" + "-" + strftime(now(), "%Y-%m-%d-%H") + ".log"
</Output>


<Output fileout_FACEBOOK_HOST3>
    CreateDir TRUE
    Module      om_file
    File        "/home/syslog/FACEBOOK_2022" + "/" + "FORMULA_APP" + "/" + "FORMULA_APP" + "-" + strftime(now(), "%Y-%m-%d-%H") + ".log"
</Output>


<Output fileout_FACEBOOK_HOST4>
    CreateDir TRUE
    Module      om_file
    File        "/home/syslog/FACEBOOK_2022" + "/" + "upload2.ondemand.com" + "/" + "upload2.ondemand.com" + "-" + strftime(now(), "%Y-%m-%d-%H") + ".log"
</Output>


<Output fileout_FACEBOOK_HOST5>
    CreateDir TRUE
    Module      om_file
    File        "/home/syslog/FACEBOOK_2022" + "/" + "02_APP" + "/" + "02_APP" + "-" + strftime(now(), "%Y-%m-%d-%H") + ".log"
</Output>


<Output fileout_FACEBOOK_HOST6>
    CreateDir TRUE
    Module      om_file
    File        "/home/syslog/FACEBOOK_2022" + "/" + "WORKPLAC.ondemand.com" + "/" + "WORKPLAC.ondemand.com" + "-" + strftime(now(), "%Y-%m-%d-%H") + ".log"
</Output>
#Route Archive


<Route FACEBOOK>
    Path       FACEBOOK_2022 => filter_FACEBOOK_HOST1 => fileout_FACEBOOK_HOST1
</Route>


<Route FACEBOOK>
    Path       FACEBOOK_2022 => filter_FACEBOOK_HOST2 => fileout_FACEBOOK_HOST2
</Route>


<Route FACEBOOK>
    Path       FACEBOOK_2022 => filter_FACEBOOK_HOST3 => fileout_FACEBOOK_HOST3
</Route>


<Route FACEBOOK>
    Path       FACEBOOK_2022 => filter_FACEBOOK_HOST4 => fileout_FACEBOOK_HOST4
</Route>


<Route FACEBOOK>
    Path       FACEBOOK_2022 => filter_FACEBOOK_HOST5 => fileout_FACEBOOK_HOST5
</Route>


<Route FACEBOOK>
    Path       FACEBOOK_2022 => filter_FACEBOOK_HOST6 => fileout_FACEBOOK_HOST6
</Route>
#Input Log FACEBOOK


<Input FACEBOOK_HOST1>
    Module      im_file
    File        "/home/syslog/FACEBOOK/C01_AD/*.log"
    SavePos     TRUE
    ReadFromLast TRUE
    PollInterval 1
    Exec        parse_syslog();
</Input>


<Input FACEBOOK_HOST2>
    Module      im_file
    File        "/home/syslog/FACEBOOK/ME/*.log"
    SavePos     TRUE
    ReadFromLast TRUE
    PollInterval 1
    Exec        parse_syslog();
</Input>


<Input FACEBOOK_HOST3>
    Module      im_file
    File        "/home/syslog/FACEBOOK/FORMULA_APP/*.log"
    SavePos     TRUE
    ReadFromLast TRUE
    PollInterval 1
    Exec        parse_syslog();
</Input>


<Input FACEBOOK_HOST4>
    Module      im_file
    File        "/home/syslog/FACEBOOK/upload2.ondemand.com/*.log"
    SavePos     TRUE
    ReadFromLast TRUE
    PollInterval 1
    Exec        parse_syslog();
</Input>


<Input FACEBOOK_HOST5>
    Module      im_file
    File        "/home/syslog/FACEBOOK/02_APP/*.log"
    SavePos     TRUE
    ReadFromLast TRUE
    PollInterval 1
    Exec        parse_syslog();
</Input>


<Input FACEBOOK_HOST6>
    Module      im_file
    File        "/home/syslog/FACEBOOK/WORKPLAC.ondemand.com/*.log"
    SavePos     TRUE
    ReadFromLast TRUE
    PollInterval 1
    Exec        parse_syslog();
</Input>

#Route Log  to  port  
<Route forwardLog>
    Path      FACEBOOK_HOST1,FACEBOOK_HOST2,FACEBOOK_HOST3,FACEBOOK_HOST4,FACEBOOK_HOST5,FACEBOOK_HOST6  => _FACEBOOK_
</Route>    

