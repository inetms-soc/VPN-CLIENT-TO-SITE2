#Auto Config NXLOG - Demo01

#INPUT PORT
<Input LCP007_20145>
    Module      im_tcp
    Host        0.0.0.0
    Port        20145
    Exec        parse_syslog();
</Input>

#Filters Host

#Filters Host1 "google"
    <Processor filter_LCP007_HOST1>
    Module      pm_filter
    Condition   $raw_event =~ /google/
</Processor>

#Filters Host2 "youtube"
    <Processor filter_LCP007_HOST2>
    Module      pm_filter
    Condition   $raw_event =~ /youtube/
</Processor>
#Output Log Template


<Output fileout_LCP007_HOST1>
    CreateDir TRUE
    Module      om_file
    File        "/home/syslog/LCP007_20145" + "/" + "LCP007_HOST1" + "/" + "LCP007_HOST1" + "-" + strftime(now(), "%Y-%m-%d-%H") + ".log"
</Output>


<Output fileout_LCP007_HOST2>
    CreateDir TRUE
    Module      om_file
    File        "/home/syslog/LCP007_20145" + "/" + "LCP007_HOST2" + "/" + "LCP007_HOST2" + "-" + strftime(now(), "%Y-%m-%d-%H") + ".log"
</Output>
#Route Archive


<Route LCP007>
    Path       LCP007_20145 => filter_LCP007_HOST1 => fileout_LCP007_HOST1
</Route>


<Route LCP007>
    Path       LCP007_20145 => filter_LCP007_HOST2 => fileout_LCP007_HOST2
</Route>
#Input Log LCP007


<Input LCP007Host1>
    Module      im_file
    File        "/home/syslog/LCP007/google/*.log"
    SavePos     TRUE
    ReadFromLast TRUE
    PollInterval 1
    Exec        parse_syslog();
</Input>


<Input LCP007Host2>
    Module      im_file
    File        "/home/syslog/LCP007/youtube/*.log"
    SavePos     TRUE
    ReadFromLast TRUE
    PollInterval 1
    Exec        parse_syslog();
</Input>

<Output ERC2_LCP007_Windows>
    Module  om_udp
    Host    10.11.100.131
    Port    514
</Output>

#Route Log Windows to ERC2 port 514 
<Route forwardLog>
    Path      LCP007_HOST1,LCP007_HOST2,  => ERC2_LCP007_Windows
</Route>    

