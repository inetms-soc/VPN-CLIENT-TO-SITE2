#Auto Config NXLOG - Demo01

#INPUT PORT
<Input BATMAN_2022>
    Module      im_tcp
    Host        0.0.0.0
    Port        2022
    Exec        parse_syslog();
</Input>

#Filters Host

#Filters Host0 "DC01_AD"
    <Processor filter_BATMAN_HOST1>
    Module      pm_filter
    Condition   $raw_event =~ /DC01_AD/
</Processor>

#Filters Host1 "ME"
    <Processor filter_BATMAN_HOST2>
    Module      pm_filter
    Condition   $raw_event =~ /ME/
</Processor>

#Filters Host2 "FORMULA_APP"
    <Processor filter_BATMAN_HOST3>
    Module      pm_filter
    Condition   $raw_event =~ /FORMULA_APP/
</Processor>

#Filters Host3 "upload2.ondemand.com"
    <Processor filter_BATMAN_HOST4>
    Module      pm_filter
    Condition   $raw_event =~ /upload2.ondemand.com/
</Processor>

#Filters Host4 "02_APP"
    <Processor filter_BATMAN_HOST5>
    Module      pm_filter
    Condition   $raw_event =~ /02_APP/
</Processor>

#Filters Host5 "WORKPLAC.ondemand.com"
    <Processor filter_BATMAN_HOST6>
    Module      pm_filter
    Condition   $raw_event =~ /WORKPLAC.ondemand.com/
</Processor>

#Filters Host6 "HO2008.ondemand.com"
    <Processor filter_BATMAN_HOST7>
    Module      pm_filter
    Condition   $raw_event =~ /HO2008.ondemand.com/
</Processor>

#Filters Host7 "hq1.ondemand.com"
    <Processor filter_BATMAN_HOST8>
    Module      pm_filter
    Condition   $raw_event =~ /hq1.ondemand.com/
</Processor>
#Output Log Template


<Output fileout_BATMAN_HOST1>
    CreateDir TRUE
    Module      om_file
    File        "/home/syslog/BATMAN_2022" + "/" + "DC01_AD" + "/" + "DC01_AD" + "-" + strftime(now(), "%Y-%m-%d-%H") + ".log"
</Output>


<Output fileout_BATMAN_HOST2>
    CreateDir TRUE
    Module      om_file
    File        "/home/syslog/BATMAN_2022" + "/" + "ME" + "/" + "ME" + "-" + strftime(now(), "%Y-%m-%d-%H") + ".log"
</Output>


<Output fileout_BATMAN_HOST3>
    CreateDir TRUE
    Module      om_file
    File        "/home/syslog/BATMAN_2022" + "/" + "FORMULA_APP" + "/" + "FORMULA_APP" + "-" + strftime(now(), "%Y-%m-%d-%H") + ".log"
</Output>


<Output fileout_BATMAN_HOST4>
    CreateDir TRUE
    Module      om_file
    File        "/home/syslog/BATMAN_2022" + "/" + "upload2.ondemand.com" + "/" + "upload2.ondemand.com" + "-" + strftime(now(), "%Y-%m-%d-%H") + ".log"
</Output>


<Output fileout_BATMAN_HOST5>
    CreateDir TRUE
    Module      om_file
    File        "/home/syslog/BATMAN_2022" + "/" + "02_APP" + "/" + "02_APP" + "-" + strftime(now(), "%Y-%m-%d-%H") + ".log"
</Output>


<Output fileout_BATMAN_HOST6>
    CreateDir TRUE
    Module      om_file
    File        "/home/syslog/BATMAN_2022" + "/" + "WORKPLAC.ondemand.com" + "/" + "WORKPLAC.ondemand.com" + "-" + strftime(now(), "%Y-%m-%d-%H") + ".log"
</Output>


<Output fileout_BATMAN_HOST7>
    CreateDir TRUE
    Module      om_file
    File        "/home/syslog/BATMAN_2022" + "/" + "HO2008.ondemand.com" + "/" + "HO2008.ondemand.com" + "-" + strftime(now(), "%Y-%m-%d-%H") + ".log"
</Output>


<Output fileout_BATMAN_HOST8>
    CreateDir TRUE
    Module      om_file
    File        "/home/syslog/BATMAN_2022" + "/" + "hq1.ondemand.com" + "/" + "hq1.ondemand.com" + "-" + strftime(now(), "%Y-%m-%d-%H") + ".log"
</Output>
#Route Archive


<Route BATMAN>
    Path       BATMAN_2022 => filter_BATMAN_HOST1 => fileout_BATMAN_HOST1
</Route>


<Route BATMAN>
    Path       BATMAN_2022 => filter_BATMAN_HOST2 => fileout_BATMAN_HOST2
</Route>


<Route BATMAN>
    Path       BATMAN_2022 => filter_BATMAN_HOST3 => fileout_BATMAN_HOST3
</Route>


<Route BATMAN>
    Path       BATMAN_2022 => filter_BATMAN_HOST4 => fileout_BATMAN_HOST4
</Route>


<Route BATMAN>
    Path       BATMAN_2022 => filter_BATMAN_HOST5 => fileout_BATMAN_HOST5
</Route>


<Route BATMAN>
    Path       BATMAN_2022 => filter_BATMAN_HOST6 => fileout_BATMAN_HOST6
</Route>


<Route BATMAN>
    Path       BATMAN_2022 => filter_BATMAN_HOST7 => fileout_BATMAN_HOST7
</Route>


<Route BATMAN>
    Path       BATMAN_2022 => filter_BATMAN_HOST8 => fileout_BATMAN_HOST8
</Route>
#Input Log BATMAN


<Input BATMAN_Host1>
    Module      im_file
    File        "/home/syslog/BATMAN/DC01_AD/*.log"
    SavePos     TRUE
    ReadFromLast TRUE
    PollInterval 1
    Exec        parse_syslog();
</Input>


<Input BATMAN_Host2>
    Module      im_file
    File        "/home/syslog/BATMAN/ME/*.log"
    SavePos     TRUE
    ReadFromLast TRUE
    PollInterval 1
    Exec        parse_syslog();
</Input>


<Input BATMAN_Host3>
    Module      im_file
    File        "/home/syslog/BATMAN/FORMULA_APP/*.log"
    SavePos     TRUE
    ReadFromLast TRUE
    PollInterval 1
    Exec        parse_syslog();
</Input>


<Input BATMAN_Host4>
    Module      im_file
    File        "/home/syslog/BATMAN/upload2.ondemand.com/*.log"
    SavePos     TRUE
    ReadFromLast TRUE
    PollInterval 1
    Exec        parse_syslog();
</Input>


<Input BATMAN_Host5>
    Module      im_file
    File        "/home/syslog/BATMAN/02_APP/*.log"
    SavePos     TRUE
    ReadFromLast TRUE
    PollInterval 1
    Exec        parse_syslog();
</Input>


<Input BATMAN_Host6>
    Module      im_file
    File        "/home/syslog/BATMAN/WORKPLAC.ondemand.com/*.log"
    SavePos     TRUE
    ReadFromLast TRUE
    PollInterval 1
    Exec        parse_syslog();
</Input>


<Input BATMAN_Host7>
    Module      im_file
    File        "/home/syslog/BATMAN/HO2008.ondemand.com/*.log"
    SavePos     TRUE
    ReadFromLast TRUE
    PollInterval 1
    Exec        parse_syslog();
</Input>


<Input BATMAN_Host8>
    Module      im_file
    File        "/home/syslog/BATMAN/hq1.ondemand.com/*.log"
    SavePos     TRUE
    ReadFromLast TRUE
    PollInterval 1
    Exec        parse_syslog();
</Input>

#Route Log  to  port  
<Route forwardLog>
    Path      BATMAN_HOST1,BATMAN_HOST2,BATMAN_HOST3,BATMAN_HOST4,BATMAN_HOST5,BATMAN_HOST6,BATMAN_HOST7,BATMAN_HOST8  => _BATMAN_
</Route>    

